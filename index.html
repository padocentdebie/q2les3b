<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Q2 Les 3b - PV Winkeldiefstal</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Rajdhani:wght@500;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --politie-lichtblauw: #e3f2fd;
            --politie-donkerblauw: #1a3a5a;
            --politie-geel: #fff9c4;
            --politie-goud: #fbc02d;
            --succes-groen: #2e7d32;
            --fout-rood: #c62828;
            --wit: #ffffff;
        }

        body { 
            font-family: 'Rajdhani', sans-serif; 
            background-color: #f4f7f9; 
            color: var(--politie-donkerblauw); 
            padding: 0; margin: 0; text-transform: uppercase;
            height: 100vh; display: flex; flex-direction: column;
        }
        
        header { 
            background-color: var(--politie-donkerblauw); 
            color: white; border-bottom: 4px solid var(--politie-goud); 
            padding: 15px 25px; flex-shrink: 0;
        }
        
        h1 { font-family: 'Oswald', sans-serif; font-size: 24px; margin: 0; letter-spacing: 1px; }

        .main-layout { display: grid; grid-template-columns: 450px 1fr; flex-grow: 1; overflow: hidden; }

        .chat-kolom {
            background-color: var(--politie-lichtblauw);
            border-right: 3px solid var(--politie-donkerblauw);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #chatWindow {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-bubble {
            background: var(--wit);
            border: 2px solid var(--politie-donkerblauw);
            padding: 12px;
            border-radius: 15px 15px 15px 0;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
        }

        .user-bubble {
            background: var(--politie-donkerblauw);
            color: white;
            align-self: flex-end;
            border-radius: 15px 15px 0 15px;
            text-transform: none;
        }

        .manager-naam { font-family: 'Oswald'; font-size: 11px; margin-bottom: 3px; opacity: 0.8; }
        .manager-tekst { text-transform: none; font-weight: 600; font-size: 15px; line-height: 1.4; }

        .chat-input-area {
            padding: 15px;
            background: var(--wit);
            border-top: 2px solid var(--politie-donkerblauw);
            display: flex;
            gap: 10px;
        }

        #managerVraag {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            text-transform: none;
            font-family: 'Rajdhani';
        }

        .werk-kolom { display: flex; flex-direction: column; overflow-y: auto; padding: 20px; gap: 20px; }
        .blok { background: var(--wit); border: 1px solid #cfd8dc; padding: 20px; border-radius: 2px; }
        .titel-blok { font-family: 'Oswald'; margin-bottom: 15px; color: var(--politie-donkerblauw); font-size: 18px; border-bottom: 2px solid var(--politie-lichtblauw); padding-bottom: 8px; }
        
        .evidence-img { width: 100%; max-height: 350px; object-fit: contain; background: #000; margin-bottom: 10px; border: 2px solid var(--politie-donkerblauw); }
        
        textarea { width: 100%; height: 140px; padding: 15px; border: 2px solid #e0e0e0; font-size: 16px; font-family: 'Roboto Mono'; resize: none; text-transform: none; box-sizing: border-box; }
        .inlever-button { width: 100%; padding: 15px; background: var(--politie-donkerblauw); color: white; font-family: 'Oswald'; border: none; cursor: pointer; font-size: 18px; }
        
        #highlightbox { white-space: pre-wrap; line-height: 2.3; font-size: 17px; text-transform: none; color: #222; min-height: 60px; padding: 15px; }

        .score-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 15px; }
        .score-unit { background: #f8f9fa; padding: 10px; text-align: center; border: 1px solid #eee; font-size: 10px; }
        .score-val { font-family: 'Oswald'; font-size: 20px; display: block; }
        
        .hl-ovt { background-color: var(--succes-groen); color: white; padding: 2px 4px; }
        .hl-vd { background-color: var(--fout-rood); color: white; padding: 2px 4px; }
        .hl-wet { border-bottom: 3px solid var(--politie-donkerblauw); font-weight: bold; }
        .hl-w { background-color: var(--politie-geel); border-bottom: 2px solid var(--politie-goud); font-weight: bold; }
        .hl-bestanddeel { background-color: #d1c4e9; border: 1px dashed #512da8; }

        footer {
            background: var(--politie-geel); padding: 10px 25px; font-size: 11px; 
            text-transform: none; border-top: 4px solid var(--politie-donkerblauw); flex-shrink: 0;
        }
    </style>
</head>
<body>

<header><h1>Q2LES3B - PV WINKELDIEFSTAL (WvSr 310)</h1></header>

<div class="main-layout">
    <aside class="chat-kolom">
        <div id="chatWindow">
            <div class="chat-bubble">
                <div class="manager-naam">HANS (SUPERMARKTMANAGER)</div>
                <div class="manager-tekst">"Yo agent, rustig? Ik moet die aangifte fixen man. Ik heb die mevrouw in de kantine gezet. Ze ontkent alles, maar de camera liegt niet. Wat wil je weten?"</div>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="managerVraag" placeholder="Stel Hans een vraag (bijv. adres of tel)...">
            <button onclick="stuurVraag()" style="background:var(--politie-goud); border:none; padding:10px; cursor:pointer; font-weight:bold;">SPOUT</button>
        </div>
    </aside>

    <main class="werk-kolom">
        <section class="blok">
            <div class="titel-blok">BEWIJSMATERIAAL (STILLS)</div>
            <img src="q2les3b.png" alt="Camerabeelden Winkeldiefstal" class="evidence-img">
            <p style="font-size: 12px; text-transform: none;">* Analyseer het <b>kale decor</b> (supermarkt), het <b>veranderlijke decor</b> (de diefstal) en het <b>signalement</b> op de stills.</p>
        </section>

        <section class="blok">
            <div class="titel-blok">1. MAAK HIER AANGIFTE OP</div>
            <textarea id="pvInput" placeholder="Noteer de formele gegevens, het verloop van de diefstal en de vordering van de beelden..."></textarea>
            <button class="inlever-button" onclick="analyseerTekst()">ANALYSEER & LEVER IN</button>
        </section>

        <section class="blok">
            <div class="titel-blok">2. INGELEVERDE TEKST & ANALYSE</div>
            <div id="highlightbox">Ingeleverde tekst verschijnt hier...</div>
            <div class="score-grid">
                <div class="score-unit"><span class="score-val" id="s-w">0</span>GOUDEN W'S</div>
                <div class="score-unit"><span class="score-val" id="s-wet">0</span>WETENSCHAP</div>
                <div class="score-unit"><span class="score-val" id="s-ovt">0</span>OVT</div>
                <div class="score-unit"><span class="score-val" id="s-vd">0</span>VOLT. DW.</div>
                <div class="score-unit" style="background: #ede7f6;"><span class="score-val" id="s-best">0</span>BESTANDDEEL</div>
            </div>
        </section>
    </main>
</div>

<footer>
    PRIVACYSTATEMENT: UW CHAT EN PV WORDEN LOKAAL VERWERKT EN NIET OPGESLAGEN OF VERZONDEN NAAR EXTERNE SERVERS.
</footer>

<script>
let fase = 0;
const managerAntwoorden = [
    "Locatie is Spar City, Hoofdstraat 142, 7311 BE in Apeldoorn. Ik ben Hans, de manager, tel: 06-12345678.",
    "Rond 14:30 uur zag ik haar bij gangpad 4, dat is de hoek met de dure crèmes en make-up.",
    "Op de beelden zie je dat ze drie potten L'Oréal crème pakt en direct in haar tas stopt.",
    "Ze is ongeveer 80 jaar, grijze knot, beige jas en een bloemetjesjurk. Ze heeft een zwarte boodschappentas op wieltjes.",
    "Ze passeerde de kassa zonder te betalen. Ik heb haar toen direct gevraagd mee te komen naar de kantine.",
    "Ik geef de camerabeelden pas mee als er een officiële vordering ligt op basis van artikel 126nd van Strafvordering."
];

const bestanddelen = [
    "toeëigenen", "enig goed", "geheel of ten dele", "oogmerk", "wederrechtelijk", 
    "Hoofdstraat 142", "7311 BE", "06-12345678", "126nd", "vordering", "vorderen",
    "boodschappentas", "bloemetjesjurk", "beige mantel", "beige jas", "L'Oréal"
];

function stuurVraag() {
    let vraag = document.getElementById('managerVraag').value;
    if(!vraag) return;
    let chat = document.getElementById('chatWindow');
    chat.innerHTML += `<div class="chat-bubble user-bubble"><div class="manager-tekst">${vraag}</div></div>`;
    
    setTimeout(() => {
        let antwoord = fase < managerAntwoorden.length ? managerAntwoorden[fase] : "Alles staat in m'n eerdere antwoorden. Maak dat PV nu maar af!";
        chat.innerHTML += `<div class="chat-bubble"><div class="manager-naam">HANS</div><div class="manager-tekst">${antwoord}</div></div>`;
        fase++;
        chat.scrollTop = chat.scrollHeight;
    }, 600);
    document.getElementById('managerVraag').value = "";
}

function analyseerTekst() {
    let tekst = document.getElementById('pvInput').value;
    if(!tekst) return;
    let h = { w:0, ovt:0, vd:0, wet:0, best:0 };
    
    const wLijst = ["wie", "wat", "waar", "wanneer", "waarom", "waarmee", "hoe"];
    const wetWoorden = ["zag dat", "hoorde dat", "nam waarnam dat", "verklaarde dat", "bevond zich"];

    // Bestanddelen & Specifieke data (Adres/Tel)
    bestanddelen.forEach(b => {
        let r = new RegExp('\\b'+b+'\\b', 'gi');
        if(tekst.match(r)) {
            tekst = tekst.replace(r, m => { h.best++; return `<span class="hl-bestanddeel">${m}</span>`; });
        }
    });

    wLijst.forEach(w => {
        let r = new RegExp('\\b'+w+'\\b', 'gi');
        tekst = tekst.replace(r, m => { if(m.includes('<span')) return m; h.w++; return `<span class="hl-w">${m}</span>`; });
    });

    wetWoorden.forEach(w => {
        let r = new RegExp(w, 'gi');
        tekst = tekst.replace(r, m => { if(m.includes('<span')) return m; h.wet++; return `<span class="hl-wet">${m}</span>`; });
    });

    const ovtRegex = /\b(liep|stond|keek|zag|hoorde|pakte|rende|kwam|sloeg|bevond|waarnam|verklaarde)\b|\b(\w+(de|te|den|ten))\b/gi;
    tekst = tekst.replace(ovtRegex, m => { if(m.includes('<span')) return m; h.ovt++; return `<span class="hl-ovt">${m}</span>`; });
    
    const vdRegex = /\b(heb|heeft|ben|is|was|werd|wordt)\s+(\w+([dt]))\b|\b(ge\w+[dt])\b/gi;
    tekst = tekst.replace(vdRegex, m => { if(m.includes('<span')) return m; h.vd++; return `<span class="hl-vd">${m}</span>`; });

    document.getElementById('highlightbox').innerHTML = tekst;
    document.getElementById('s-w').innerText = h.w;
    document.getElementById('s-wet').innerText = h.wet;
    document.getElementById('s-ovt').innerText = h.ovt;
    document.getElementById('s-vd').innerText = h.vd;
    document.getElementById('s-best').innerText = h.best;
}
</script>
</body>
</html>
